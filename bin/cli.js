#!/usr/bin/env node
/* eslint-disable no-console */
import fs from "node:fs"; import path from "node:path"; const R = process.cwd(), a = process.argv.slice(2), c = a[ 0 ] || "init"; const rd = f => fs.readFileSync(f, "utf8"), wr = (f, s) => { fs.mkdirSync(path.dirname(f), { recursive: !0 }); fs.writeFileSync(f, s, "utf8") }, fE = f => fs.existsSync(f) && fs.statSync(f).isFile(), dE = d => fs.existsSync(d) && fs.statSync(d).isDirectory(); const P = (() => { try { return JSON.parse(rd(path.join(R, "package.json"))) } catch { return {} } })(), D = { ...(P.dependencies || {}), ...(P.devDependencies || {}) }, F = D.next ? "next" : "react"; const N = [ "app/globals.css", "app/global.css", "styles/globals.css", "styles/global.css", "src/app/globals.css", "src/app/global.css", "src/styles/globals.css", "src/styles/global.css" ], V = [ "src/index.css", "src/main.css", "src/global.css", "index.css" ], C = F === "next" ? N : V; const pick = () => { for (const x of C) { const f = path.join(R, x); if (fE(f)) return f } if (F === "next") { const A = dE(path.join(R, "app")) && path.join(R, "app/globals.css"), B = dE(path.join(R, "src/app")) && path.join(R, "src/app/globals.css"), S = dE(path.join(R, "styles")) && path.join(R, "styles/globals.css"), T = dE(path.join(R, "src/styles")) && path.join(R, "src/styles/globals.css"); return A || B || S || T || path.join(R, "app/globals.css") } return dE(path.join(R, "src")) ? path.join(R, "src/index.css") : path.join(R, "index.css") }; const M = "/*saha-ui*/", TW = /@import\s+["']tailwindcss["'];?/; const SRC = `@import "tailwindcss";
@custom-variant dark (&:is(.dark *));@theme inline{--radius-sm:calc(var(--radius) - 4px);--radius-md:calc(var(--radius) - 2px);--radius-lg:var(--radius);--radius-xl:calc(var(--radius) + 4px);--color-background:var(--background);--color-foreground:var(--foreground);--color-card:var(--card);--color-card-foreground:var(--card-foreground);--color-popover:var(--popover);--color-popover-foreground:var(--popover-foreground);--color-primary:var(--primary);--color-primary-foreground:var(--primary-foreground);--color-secondary:var(--secondary);--color-secondary-foreground:var(--secondary-foreground);--color-muted:var(--muted);--color-muted-foreground:var(--muted-foreground);--color-accent:var(--accent);--color-accent-foreground:var(--accent-foreground);--color-destructive:var(--destructive);--color-destructive-foreground:var(--destructive-foreground);--color-border:var(--border);--color-input:var(--input);--color-ring:var(--ring);--color-chart-1:var(--chart-1);--color-chart-2:var(--chart-2);--color-chart-3:var(--chart-3);--color-chart-4:var(--chart-4);--color-chart-5:var(--chart-5);--color-success:var(--success);--color-success-foreground:var(--success-foreground);--color-warning:var(--warning);--color-warning-foreground:var(--warning-foreground);--color-error:var(--error);--color-error-foreground:var(--error-foreground);--color-info:var(--info);--color-info-foreground:var(--info-foreground)}
:root{--radius:.625rem;--background:oklch(.98 .003 200);--foreground:oklch(.15 .01 200);--card:oklch(1 0 0);--card-foreground:oklch(.15 .01 200);--popover:oklch(1 0 0);--popover-foreground:oklch(.15 .01 200);--primary:oklch(48.151% .23085 269.463);--primary-foreground:oklch(1 0 0);--secondary:oklch(.65 .25 340);--secondary-foreground:oklch(1 0 0);--muted:oklch(.96 .005 200);--muted-foreground:oklch(.45 .01 200);--accent:oklch(.65 .12 185);--accent-foreground:oklch(1 0 0);--success:oklch(.60 .15 145);--success-foreground:oklch(1 0 0);--warning:oklch(.70 .15 65);--warning-foreground:oklch(.15 .01 200);--error:oklch(.60 .20 25);--error-foreground:oklch(1 0 0);--destructive:oklch(.60 .20 25);--destructive-foreground:oklch(1 0 0);--info:oklch(.60 .15 250);--info-foreground:oklch(1 0 0);--border:oklch(.92 .005 200);--input:oklch(.96 .005 200);--ring:oklch(.60 .18 275);--chart-1:oklch(.60 .18 275);--chart-2:oklch(.60 .15 145);--chart-3:oklch(.60 .15 250);--chart-4:oklch(.65 .25 340);--chart-5:oklch(.65 .12 185);--glass-bg:oklch(1 0 0 / .25);--glass-bg-hover:oklch(1 0 0 / .35);--glass-border:oklch(.60 .18 275 / .15);--glass-shadow:0 8px 32px 0 oklch(.60 .18 275 / .12);--glass-blur:16px}
.dark{--background:oklch(.08 .005 200);--foreground:oklch(.95 .005 200);--card:oklch(.12 .01 200);--card-foreground:oklch(.95 .005 200);--popover:oklch(.12 .01 200);--popover-foreground:oklch(.95 .005 200);--primary:oklch(41.145% .14945 272.396);--primary-foreground:oklch(.98 .003 200);--secondary:oklch(.70 .25 340);--secondary-foreground:oklch(.98 .003 200);--muted:oklch(.15 .01 200);--muted-foreground:oklch(.65 .005 200);--accent:oklch(.70 .15 185);--accent-foreground:oklch(.98 .003 200);--success:oklch(.65 .18 145);--success-foreground:oklch(.98 .003 200);--warning:oklch(.75 .18 65);--warning-foreground:oklch(.98 .003 200);--error:oklch(.65 .22 25);--error-foreground:oklch(.98 .003 200);--destructive:oklch(.65 .22 25);--destructive-foreground:oklch(.98 .003 200);--info:oklch(.65 .18 250);--info-foreground:oklch(.98 .003 200);--border:oklch(.20 .01 200);--input:oklch(.15 .01 200);--ring:oklch(.68 .20 275);--chart-1:oklch(.68 .20 275);--chart-2:oklch(.65 .18 145);--chart-3:oklch(.65 .18 250);--chart-4:oklch(.70 .25 340);--chart-5:oklch(.70 .15 185);--glass-bg:oklch(.12 .01 200 / .5);--glass-bg-hover:oklch(.12 .01 200 / .7);--glass-border:oklch(.68 .20 275 / .2);--glass-shadow:0 8px 32px 0 oklch(0 0 0 / .6);--glass-blur:16px}
@layer base{*{@apply border-border outline-ring/50}body{@apply bg-background text-foreground;background:linear-gradient(135deg,oklch(.98 .003 200) 0%,oklch(.96 .02 270) 50%,oklch(.98 .02 340) 100%);background-attachment:fixed;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.dark body{@apply text-foreground;color:oklch(.95 .005 200);background:linear-gradient(135deg,oklch(.08 .005 200) 0%,oklch(.10 .01 200) 50%,oklch(.12 .01 200) 100%);background-attachment:fixed}.dark{color-scheme:dark}}
@layer components{.glass{background:var(--glass-bg);backdrop-filter:blur(var(--glass-blur)) saturate(180%);-webkit-backdrop-filter:blur(var(--glass-blur)) saturate(180%);border:1px solid var(--glass-border);box-shadow:var(--glass-shadow);position:relative}.glass::before{content:'';position:absolute;inset:0;border-radius:inherit;padding:1px;background:linear-gradient(135deg,oklch(1 0 0 / .4) 0%,oklch(1 0 0 / .1) 50%,oklch(1 0 0 / 0) 100%);-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);mask-composite:exclude;pointer-events:none}.dark .glass::before{background:linear-gradient(135deg,oklch(.68 .20 275 / .3) 0%,oklch(.68 .20 275 / .1) 50%,oklch(.68 .20 275 / 0) 100%)}.glass-hover:hover{background:var(--glass-bg-hover);transform:translateY(-2px);box-shadow:0 12px 48px 0 oklch(.60 .18 275 / .2)}.dark .glass-hover:hover{box-shadow:0 12px 48px 0 oklch(0 0 0 / .7)}.glass-strong{background:var(--glass-bg);backdrop-filter:blur(24px) saturate(200%);-webkit-backdrop-filter:blur(24px) saturate(200%);border:1px solid var(--glass-border);box-shadow:var(--glass-shadow),inset 0 1px 0 oklch(1 0 0 / .3)}.dark .glass-strong{box-shadow:var(--glass-shadow),inset 0 1px 0 oklch(.68 .20 275 / .2)}.glass-subtle{background:var(--glass-bg);backdrop-filter:blur(8px) saturate(150%);-webkit-backdrop-filter:blur(8px) saturate(150%);border:1px solid var(--glass-border);box-shadow:0 1px 2px 0 oklch(0 0 0 / .05)}}
@layer base{*{border-color:var(--border)}body{background:linear-gradient(135deg,#f8fafc 0%,#e0e7ff 50%,#fce7f3 100%);background-attachment:fixed;color:var(--text);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.dark body{background:linear-gradient(135deg,#0a0a0a 0%,#171717 50%,#1a1a1a 100%);background-attachment:fixed}*{transition-property:background-color,border-color,color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:150ms}}
@layer utilities{@keyframes progress-stripes{0%{background-position:0 0}100%{background-position:1.5rem 0}}@keyframes progress-indeterminate{0%{left:-40%;transform:scaleX(.6)}50%{transform:scaleX(1)}100%{left:100%;transform:scaleX(.6)}}@keyframes progress-shimmer{0%{transform:translateX(-100%) scaleX(0);opacity:0}10%{opacity:1}50%{transform:translateX(0%) scaleX(1)}90%{opacity:1}100%{transform:translateX(100%) scaleX(0);opacity:0}}@keyframes progress-glow-pulse{0%,100%{filter:brightness(1) saturate(1)}50%{filter:brightness(1.15) saturate(1.2)}}}
@keyframes collapsible-down{from{height:0;opacity:0}to{height:var(--radix-collapsible-content-height);opacity:1}}
@keyframes collapsible-up{from{height:var(--radix-collapsible-content-height);opacity:1}to{height:0;opacity:0}}
.scrollbar-none{-ms-overflow-style:none;scrollbar-width:none}
.scrollbar-none::-webkit-scrollbar{display:none}
[role="menu"],[role="listbox"]{-ms-overflow-style:none;scrollbar-width:none}
[role="menu"]::-webkit-scrollbar,[role="listbox"]::-webkit-scrollbar{display:none}
[contenteditable][data-placeholder]:empty:before{content:attr(data-placeholder);color:hsl(var(--muted-foreground));opacity:.5;pointer-events:none}
[contenteditable]:focus:empty:before{content:attr(data-placeholder);color:hsl(var(--muted-foreground));opacity:.3}
`; const CSS = SRC.trim(), CSS_NO = CSS.replace(/^@import\s+["']tailwindcss["'];?/, "").trim(); const inject = f => { const ex = fE(f), cur = ex ? rd(f) : ""; if (cur.includes(M)) return console.log(`saha-ui: CSS already injected in ${path.relative(R, f)}`); const out = TW.test(cur) ? cur.replace(TW, m => `${m}\n${M}\n${CSS_NO}`) : `${M}\n${CSS}\n${cur}`; wr(f, out); console.log(`saha-ui: Injected CSS into ${path.relative(R, f)} (${F})`); if (!ex) { F === "next" ? console.log("saha-ui: Ensure root layout imports this CSS (app/layout.tsx -> import './globals.css')") : console.log("saha-ui: Ensure src/main.tsx imports './index.css'") } }; const run = () => c === "init" ? inject(pick()) : console.log("Usage: npx saha-ui init"); run();